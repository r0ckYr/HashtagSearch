{"ast":null,"code":"import { default as axios } from 'axios';\nconst access_token = \"EAAJDv7yPPgQBAKaOMmfuxuqifoGwvow4T0Tre3bkG4PVJYfZAlQofC91fHLQCB5aQVJ26pSDLdDMqyQ79HcEIWLAKVPeSRjcabFXr3MyXmtTS9d2ZA5zkN5Ha6CadeDA4YTMDy6JH5Jtfwm52e4ILMczq8syXIwLxfgtFu4Qpe8klI22OfGX6pmIfXe8B1dHNALhXvNwZDZD\";\nlet hashtags = [];\nfunction onEnter() {\n  const searchBar = document.getElementById(\"searchBar\");\n  console.log(\"asfdsdaf\");\n  searchBar.addEventListener(\"keypress\", function (event) {\n    if (1) {\n      event.preventDefault();\n      console.log(\"qwer\");\n      document.getElementById(\"searchButton\").click();\n    }\n  });\n}\nasync function getHashtags(hashtag) {\n  await axios.get(`https://graph.facebook.com/v15.0/ig_hashtag_search?user_id=17841451359932261&q=${hashtag}&access_token=${access_token}`).then(response => {\n    let id = response.data.data[0].id;\n    getAllHashtags(id);\n  }).catch(error => {\n    console.log(error);\n  });\n}\nasync function getAllHashtags(id) {\n  await axios.get(`https://graph.facebook.com/v15.0/${id}/top_media?user_id=17841451359932261&limit=5&fields=caption&access_token=${access_token}`).then(response => {\n    const data = response.data.data;\n    for (let i = 0; i < data.length; i++) {\n      let caption = data[i].caption;\n      let words = caption.split(' ');\n      for (let j = 0; j < words.length; j++) {\n        if (words[j].startsWith(\"#\")) hashtags.push(words[j]);\n      }\n    }\n    hashtags = removeDuplicates(hashtags);\n    doSomething(hashtags);\n  }).catch(error => {\n    console.log(error);\n  });\n}\nfunction doSomething() {\n  const hashtagsP = document.getElementById(\"hashtags\");\n  let allHashtags = \"\";\n  for (let i = 0; i < hashtags.length; i++) {\n    allHashtags = allHashtags + hashtags[i].trim() + \" \";\n  }\n  return allHashtags;\n}\nfunction removeDuplicates(arr) {\n  return [...new Set(arr)];\n}\nfunction searchApi() {\n  const searchBar = document.getElementById(\"searchBar\");\n  var searchItem = searchBar.value;\n  console.log(searchItem);\n  getHashtags(searchItem);\n}\nexport default searchApi;","map":{"version":3,"names":["default","axios","access_token","hashtags","onEnter","searchBar","document","getElementById","console","log","addEventListener","event","preventDefault","click","getHashtags","hashtag","get","then","response","id","data","getAllHashtags","catch","error","i","length","caption","words","split","j","startsWith","push","removeDuplicates","doSomething","hashtagsP","allHashtags","trim","arr","Set","searchApi","searchItem","value"],"sources":["/home/rocky/Projects/instagramBot/instabotreact/src/components/Search/Api.jsx"],"sourcesContent":["import {default as axios} from 'axios';\n\nconst access_token = \"EAAJDv7yPPgQBAKaOMmfuxuqifoGwvow4T0Tre3bkG4PVJYfZAlQofC91fHLQCB5aQVJ26pSDLdDMqyQ79HcEIWLAKVPeSRjcabFXr3MyXmtTS9d2ZA5zkN5Ha6CadeDA4YTMDy6JH5Jtfwm52e4ILMczq8syXIwLxfgtFu4Qpe8klI22OfGX6pmIfXe8B1dHNALhXvNwZDZD\"\nlet hashtags = [];\n\nfunction onEnter(){\n    const searchBar = document.getElementById(\"searchBar\");\n    console.log(\"asfdsdaf\")\n    searchBar.addEventListener(\"keypress\", function(event) {\n        if (1) {\n            event.preventDefault();\n            console.log(\"qwer\");\n            document.getElementById(\"searchButton\").click();\n        }\n    }); \n}\n\n\nasync function getHashtags(hashtag)\n{\n    await axios.get(`https://graph.facebook.com/v15.0/ig_hashtag_search?user_id=17841451359932261&q=${hashtag}&access_token=${access_token}`)\n      .then(response => {\n          let id = response.data.data[0].id;\n          getAllHashtags(id);\n      })\n      .catch(error => {\n          console.log(error);\n      });\n\n}\n\n\nasync function getAllHashtags(id)\n{\n\n    await axios.get(`https://graph.facebook.com/v15.0/${id}/top_media?user_id=17841451359932261&limit=5&fields=caption&access_token=${access_token}`)\n      .then(response => {\n          const data = response.data.data;\n\n          for(let i=0;i<data.length;i++)\n          {\n              let caption = data[i].caption;\n              let words = caption.split(' ')\n              for(let j=0;j<words.length;j++)\n              {\n                if(words[j].startsWith(\"#\"))\n                      hashtags.push(words[j])\n              }\n          }\n          hashtags = removeDuplicates(hashtags)\n          doSomething(hashtags);\n      })\n      .catch(error => {\n          console.log(error);\n      });\n\n\n}\n\nfunction doSomething()\n{\n    const hashtagsP = document.getElementById(\"hashtags\");\n    let allHashtags = \"\";\n\n    for(let i=0;i<hashtags.length;i++)\n    {\n        allHashtags = allHashtags + hashtags[i].trim()+ \" \";\n    }\n    return allHashtags;\n}\n\nfunction removeDuplicates(arr) {\n        return [...new Set(arr)];\n}\n\nfunction searchApi(){\n    const searchBar = document.getElementById(\"searchBar\");\n\n    var searchItem = searchBar.value;\n    console.log(searchItem);\n\n    getHashtags(searchItem);\n    \n}\n\nexport default searchApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}